<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Interaktif Fungi</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f4f8; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 600px; }
        h1 { color: #2c3e50; text-align: center; }
        .question { font-size: 1.2em; margin-bottom: 20px; font-weight: bold; }
        .options { display: grid; gap: 10px; }
        button { padding: 12px; border: none; border-radius: 8px; cursor: pointer; transition: 0.3s; font-size: 1em; }
        .option-btn { background-color: #ecf0f1; color: #2c3e50; text-align: left; }
        .option-btn:hover { background-color: #d5dbdb; }
        .next-btn { background-color: #3498db; color: white; width: 100%; margin-top: 20px; display: none; }
        .result-section, .history-section { display: none; text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #3498db; color: white; }
        .reset-btn { background-color: #e74c3c; color: white; margin-top: 10px; font-size: 0.8em; }
    </style>
</head>
<body>

<div class="container">
    <div id="quiz">
        <h1>üçÑ Kuis Dunia Fungi</h1>
        <div id="question-container">
            <div class="question" id="question">Memuat soal...</div>
            <div class="options" id="options"></div>
        </div>
        <button class="next-btn" id="next-button" onclick="nextQuestion()">Soal Berikutnya</button>
    </div>

    <div id="result" class="result-section">
        <h2>Hasil Akhir: <span id="score-display"></span>/100</h2>
        <input type="text" id="username" placeholder="Masukkan namamu">
        <button onclick="saveScore()" style="background-color: #27ae60; color: white;">Simpan ke Leaderboard</button>
        <button onclick="location.reload()">Ulangi Kuis</button>
    </div>

    <div id="history" class="history-section" style="display: block; margin-top: 30px;">
        <h3>üèÜ Leaderboard (Top 5)</h3>
        <table id="leaderboard-table">
            <thead><tr><th>Nama</th><th>Skor</th></tr></thead>
            <tbody id="leaderboard-body"></tbody>
        </table>
        <button class="reset-btn" onclick="resetLeaderboard()">Reset Leaderboard</button>
        
        <h3>üìú Riwayat Skor Kamu</h3>
        <ul id="history-list" style="text-align: left;"></ul>
    </div>
</div>

<script>
    const questions = [
        { q: "Apa nama cabang ilmu biologi yang mempelajari tentang fungi?", a: ["Mikologi", "Fikologi", "Botani", "Zoologi"], correct: 0 },
        { q: "Dinding sel jamur tersusun atas zat...", a: ["Selulosa", "Kitin", "Lignin", "Pektin"], correct: 1 },
        { q: "Jamur yang digunakan dalam pembuatan tempe adalah...", a: ["Saccharomyces", "Rhizopus oryzae", "Aspergillus wentii", "Neurospora"], correct: 1 },
        { q: "Simbiosis antara jamur dengan akar tanaman disebut...", a: ["Lichenes", "Mikoriza", "Parasit", "Saprofit"], correct: 1 },
        { q: "Divisi jamur yang belum diketahui reproduksi seksualnya disebut...", a: ["Ascomycota", "Basidiomycota", "Deuteromycota", "Zygomycota"], correct: 2 }
    ];

    let currentIdx = 0;
    let score = 0;

    function showQuestion() {
        const item = questions[currentIdx];
        document.getElementById("question").innerText = item.q;
        const optionsDiv = document.getElementById("options");
        optionsDiv.innerHTML = "";
        item.a.forEach((opt, i) => {
            const btn = document.createElement("button");
            btn.innerText = opt;
            btn.className = "option-btn";
            btn.onclick = () => checkAnswer(i);
            optionsDiv.appendChild(btn);
        });
    }

    function checkAnswer(idx) {
        if (idx === questions[currentIdx].correct) score += (100 / questions.length);
        document.querySelectorAll(".option-btn").forEach(b => b.disabled = true);
        document.getElementById("next-button").style.display = "block";
    }

    function nextQuestion() {
        currentIdx++;
        if (currentIdx < questions.length) {
            showQuestion();
            document.getElementById("next-button").style.display = "none";
        } else {
            showResult();
        }
    }

    function showResult() {
        document.getElementById("quiz").style.display = "none";
        document.getElementById("result").style.display = "block";
        document.getElementById("score-display").innerText = score;
        saveToHistory(score);
    }

    function saveToHistory(s) {
        let history = JSON.parse(localStorage.getItem("quizHistory") || "[]");
        history.push({ score: s, date: new Date().toLocaleString() });
        localStorage.setItem("quizHistory", JSON.stringify(history));
        updateDisplay();
    }

    function saveScore() {
        const name = document.getElementById("username").value || "Anonymous";
        let leaderboard = JSON.parse(localStorage.getItem("leaderboard") || "[]");
        leaderboard.push({ name: name, score: score });
        leaderboard.sort((a, b) => b.score - a.score);
        localStorage.setItem("leaderboard", JSON.stringify(leaderboard.slice(0, 5)));
        alert("Skor disimpan!");
        updateDisplay();
    }

    function updateDisplay() {
        const lbBody = document.getElementById("leaderboard-body");
        const leaderboard = JSON.parse(localStorage.getItem("leaderboard") || "[]");
        lbBody.innerHTML = leaderboard.map(i => `<tr><td>${i.name}</td><td>${i.score}</td></tr>`).join("");

        const historyList = document.getElementById("history-list");
        const history = JSON.parse(localStorage.getItem("quizHistory") || "[]");
        historyList.innerHTML = history.reverse().map(i => `<li>Skor: ${i.score} (${i.date})</li>`).join("");
    }

    function resetLeaderboard() {
        if(confirm("Hapus semua data?")) {
            localStorage.clear();
            updateDisplay();
        }
    }

    showQuestion();
    updateDisplay();
</script>
</body>
</html>